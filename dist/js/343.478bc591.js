(self["webpackChunkionic_app_base"]=self["webpackChunkionic_app_base"]||[]).push([[343],{7439:function(e,t,r){"use strict";var n,o,i;r.d(t,{GW:function(){return o},dk:function(){return i},oK:function(){return n}}),function(e){e["Prompt"]="PROMPT",e["Camera"]="CAMERA",e["Photos"]="PHOTOS"}(n||(n={})),function(e){e["Rear"]="REAR",e["Front"]="FRONT"}(o||(o={})),function(e){e["Uri"]="uri",e["Base64"]="base64",e["DataUrl"]="dataUrl"}(i||(i={}))},9895:function(e,t,r){"use strict";r.d(t,{Uw:function(){return f},dV:function(){return u},fo:function(){return p},xz:function(){return s}});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const n=e=>{const t=new Map;t.set("web",{name:"web"});const r=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(e,t)=>{r.platforms.set(e,t)},o=e=>{r.platforms.has(e)&&(r.currentPlatform=r.platforms.get(e))};return r.addPlatform=n,r.setPlatform=o,r},o=e=>e.CapacitorPlatforms=n(e),i=o("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{});i.addPlatform,i.setPlatform;var a;(function(e){e["Unimplemented"]="UNIMPLEMENTED",e["Unavailable"]="UNAVAILABLE"})(a||(a={}));class s extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const c=e=>{var t,r;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(r=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===r?void 0:r.bridge)?"ios":"web"},l=e=>{var t,r,n,o,i;const l=e.CapacitorCustomPlatform||null,d=e.Capacitor||{},u=d.Plugins=d.Plugins||{},p=e.CapacitorPlatforms,f=()=>null!==l?l.name:c(e),h=(null===(t=null===p||void 0===p?void 0:p.currentPlatform)||void 0===t?void 0:t.getPlatform)||f,m=()=>"web"!==h(),w=(null===(r=null===p||void 0===p?void 0:p.currentPlatform)||void 0===r?void 0:r.isNativePlatform)||m,y=e=>{const t=R.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(h()))||!!E(e)},v=(null===(n=null===p||void 0===p?void 0:p.currentPlatform)||void 0===n?void 0:n.isPluginAvailable)||y,g=e=>{var t;return null===(t=d.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},E=(null===(o=null===p||void 0===p?void 0:p.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||g,b=t=>e.console.error(t),_=(e,t,r)=>Promise.reject(`${r} does not have an implementation of "${t}".`),R=new Map,A=(e,t={})=>{const r=R.get(e);if(r)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),r.proxy;const n=h(),o=E(e);let i;const c=async()=>(!i&&n in t?i=i="function"===typeof t[n]?await t[n]():t[n]:null!==l&&!i&&"web"in t&&(i=i="function"===typeof t["web"]?await t["web"]():t["web"]),i),p=(t,r)=>{var i,c;if(!o){if(t)return null===(c=t[r])||void 0===c?void 0:c.bind(t);throw new s(`"${e}" plugin is not implemented on ${n}`,a.Unimplemented)}{const n=null===o||void 0===o?void 0:o.methods.find((e=>r===e.name));if(n)return"promise"===n.rtype?t=>d.nativePromise(e,r.toString(),t):(t,n)=>d.nativeCallback(e,r.toString(),t,n);if(t)return null===(i=t[r])||void 0===i?void 0:i.bind(t)}},f=t=>{let r;const o=(...o)=>{const i=c().then((i=>{const c=p(i,t);if(c){const e=c(...o);return r=null===e||void 0===e?void 0:e.remove,e}throw new s(`"${e}.${t}()" is not implemented on ${n}`,a.Unimplemented)}));return"addListener"===t&&(i.remove=async()=>r()),i};return o.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(o,"name",{value:t,writable:!1,configurable:!1}),o},m=f("addListener"),w=f("removeListener"),y=(e,t)=>{const r=m({eventName:e},t),n=async()=>{const n=await r;w({eventName:e,callbackId:n},t)},o=new Promise((e=>r.then((()=>e({remove:n})))));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},o},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return o?y:m;case"removeListener":return w;default:return f(t)}}});return u[e]=v,R.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(t),...o?[n]:[]])}),v},T=(null===(i=null===p||void 0===p?void 0:p.currentPlatform)||void 0===i?void 0:i.registerPlugin)||A;return d.convertFileSrc||(d.convertFileSrc=e=>e),d.getPlatform=h,d.handleError=b,d.isNativePlatform=w,d.isPluginAvailable=v,d.pluginMethodNoop=_,d.registerPlugin=T,d.Exception=s,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},d=e=>e.Capacitor=l(e),u=d("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{}),p=u.registerPlugin;u.Plugins;class f{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){const r=this.listeners[e];r||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const o=async()=>this.removeListener(e,t),i=Promise.resolve({remove:o});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const r=this.listeners[e];r&&r.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new u.Exception(e,a.Unimplemented)}unavailable(e="not available"){return new u.Exception(e,a.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const n=r.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const h=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class m extends f{async setCookie(e){try{const t=h(e.key),r=h(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=","");document.cookie=`${t}=${r||""}${n}; path=${o}`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}p("CapacitorCookies",{web:()=>new m});const w=async e=>new Promise(((t,r)=>{const n=new FileReader;n.onload=()=>{const e=n.result;t(e.indexOf(",")>=0?e.split(",")[1]:e)},n.onerror=e=>r(e),n.readAsDataURL(e)})),y=(e={})=>{const t=Object.keys(e),r=Object.keys(e).map((e=>e.toLocaleLowerCase())),n=r.reduce(((r,n,o)=>(r[n]=e[t[o]],r)),{});return n},v=(e,t=!0)=>{if(!e)return null;const r=Object.entries(e).reduce(((e,r)=>{const[n,o]=r;let i,a;return Array.isArray(o)?(a="",o.forEach((e=>{i=t?encodeURIComponent(e):e,a+=`${n}=${i}&`})),a.slice(0,-1)):(i=t?encodeURIComponent(o):o,a=`${n}=${i}`),`${e}&${a}`}),"");return r.substr(1)},g=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=y(e.headers),o=n["content-type"]||"";if("string"===typeof e.data)r.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const t=new URLSearchParams;for(const[r,n]of Object.entries(e.data||{}))t.set(r,n);r.body=t.toString()}else if(o.includes("multipart/form-data")){const t=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,r)=>{t.append(r,e)}));else for(const r of Object.keys(e.data))t.append(r,e.data[r]);r.body=t;const n=new Headers(r.headers);n.delete("content-type"),r.headers=n}else(o.includes("application/json")||"object"===typeof e.data)&&(r.body=JSON.stringify(e.data));return r};class E extends f{async request(e){const t=g(e,e.webFetchExtra),r=v(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,o=await fetch(n,t),i=o.headers.get("content-type")||"";let a,s,{responseType:c="text"}=o.ok?e:{};switch(i.includes("application/json")&&(c="json"),c){case"arraybuffer":case"blob":s=await o.blob(),a=await w(s);break;case"json":a=await o.json();break;case"document":case"text":default:a=await o.text()}const l={};return o.headers.forEach(((e,t)=>{l[t]=e})),{data:a,headers:l,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}p("CapacitorHttp",{web:()=>new E})},6077:function(e,t,r){var n=r(614),o=String,i=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw i("Can't set "+o(e)+" as a prototype")}},5787:function(e,t,r){var n=r(7976),o=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw o("Incorrect invocation")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,r){"use strict";var n,o,i,a=r(3013),s=r(9781),c=r(7854),l=r(614),d=r(111),u=r(2597),p=r(648),f=r(6330),h=r(8880),m=r(8052),w=r(3070).f,y=r(7976),v=r(9518),g=r(7674),E=r(5112),b=r(9711),_=r(9909),R=_.enforce,A=_.get,T=c.Int8Array,P=T&&T.prototype,I=c.Uint8ClampedArray,C=I&&I.prototype,O=T&&v(T),L=P&&v(P),U=Object.prototype,k=c.TypeError,x=E("toStringTag"),D=b("TYPED_ARRAY_TAG"),S="TypedArrayConstructor",j=a&&!!g&&"Opera"!==p(c.opera),N=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},M=function(e){if(!d(e))return!1;var t=p(e);return"DataView"===t||u(W,t)||u(F,t)},B=function(e){var t=v(e);if(d(t)){var r=A(t);return r&&u(r,S)?r[S]:B(t)}},$=function(e){if(!d(e))return!1;var t=p(e);return u(W,t)||u(F,t)},H=function(e){if($(e))return e;throw k("Target is not a typed array")},q=function(e){if(l(e)&&(!g||y(O,e)))return e;throw k(f(e)+" is not a typed array constructor")},V=function(e,t,r,n){if(s){if(r)for(var o in W){var i=c[o];if(i&&u(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(l){}}}L[e]&&!r||m(L,e,r?t:j&&P[e]||t,n)}},z=function(e,t,r){var n,o;if(s){if(g){if(r)for(n in W)if(o=c[n],o&&u(o,e))try{delete o[e]}catch(i){}if(O[e]&&!r)return;try{return m(O,e,r?t:j&&O[e]||t)}catch(i){}}for(n in W)o=c[n],!o||o[e]&&!r||m(o,e,t)}};for(n in W)o=c[n],i=o&&o.prototype,i?R(i)[S]=o:j=!1;for(n in F)o=c[n],i=o&&o.prototype,i&&(R(i)[S]=o);if((!j||!l(O)||O===Function.prototype)&&(O=function(){throw k("Incorrect invocation")},j))for(n in W)c[n]&&g(c[n],O);if((!j||!L||L===U)&&(L=O.prototype,j))for(n in W)c[n]&&g(c[n].prototype,L);if(j&&v(C)!==L&&g(C,L),s&&!u(L,x))for(n in N=!0,w(L,x,{get:function(){return d(this)?this[D]:void 0}}),W)c[n]&&h(c[n],D,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:N&&D,aTypedArray:H,aTypedArrayConstructor:q,exportTypedArrayMethod:V,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:B,isView:M,isTypedArray:$,TypedArray:O,TypedArrayPrototype:L}},9671:function(e,t,r){var n=r(9974),o=r(8361),i=r(7908),a=r(6244),s=function(e){var t=1==e;return function(r,s,c){var l,d,u=i(r),p=o(u),f=n(s,c),h=a(p);while(h-- >0)if(l=p[h],d=f(l,h,u),d)switch(e){case 0:return l;case 1:return h}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},648:function(e,t,r){var n=r(1694),o=r(614),i=r(4326),a=r(5112),s=a("toStringTag"),c=Object,l="Arguments"==i(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(r){}};e.exports=n?i:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=d(t=c(e),s))?r:l?i(t):"Object"==(n=i(t))&&o(t.callee)?"Arguments":n}},3918:function(e,t,r){var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},1060:function(e,t,r){var n=r(1702),o=Error,i=n("".replace),a=function(e){return String(o(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=i(e,s,"");return e}},9974:function(e,t,r){var n=r(1702),o=r(9662),i=r(4374),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},9587:function(e,t,r){var n=r(614),o=r(111),i=r(7674);e.exports=function(e,t,r){var a,s;return i&&n(a=t.constructor)&&a!==r&&o(s=a.prototype)&&s!==r.prototype&&i(e,s),e}},6277:function(e,t,r){var n=r(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},9518:function(e,t,r){var n=r(2597),o=r(614),i=r(7908),a=r(6200),s=r(3918),c=a("IE_PROTO"),l=Object,d=l.prototype;e.exports=s?l.getPrototypeOf:function(e){var t=i(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof l?d:null}},7674:function(e,t,r){var n=r(1702),o=r(9670),i=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(r,[]),t=r instanceof Array}catch(a){}return function(r,n){return o(r),i(n),t?e(r,n):r.__proto__=n,r}}():void 0)},1694:function(e,t,r){var n=r(5112),o=n("toStringTag"),i={};i[o]="z",e.exports="[object z]"===String(i)},1340:function(e,t,r){var n=r(648),o=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},4590:function(e,t,r){"use strict";var n=r(260),o=r(9671).findLastIndex,i=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLastIndex",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,r){"use strict";var n=r(260),o=r(9671).findLast,i=n.aTypedArray,a=n.exportTypedArrayMethod;a("findLast",(function(e){return o(i(this),e,arguments.length>1?arguments[1]:void 0)}))},2801:function(e,t,r){"use strict";var n=r(2109),o=r(7854),i=r(5005),a=r(9114),s=r(3070).f,c=r(2597),l=r(5787),d=r(9587),u=r(6277),p=r(3678),f=r(1060),h=r(9781),m=r(1913),w="DOMException",y=i("Error"),v=i(w),g=function(){l(this,E);var e=arguments.length,t=u(e<1?void 0:arguments[0]),r=u(e<2?void 0:arguments[1],"Error"),n=new v(t,r),o=y(t);return o.name=w,s(n,"stack",a(1,f(o.stack,1))),d(n,this,g),n},E=g.prototype=v.prototype,b="stack"in y(w),_="stack"in new v(1,2),R=v&&h&&Object.getOwnPropertyDescriptor(o,w),A=!!R&&!(R.writable&&R.configurable),T=b&&!A&&!_;n({global:!0,constructor:!0,forced:m||T},{DOMException:T?g:v});var P=i(w),I=P.prototype;if(I.constructor!==P)for(var C in m||s(I,"constructor",a(1,P)),p)if(c(p,C)){var O=p[C],L=O.s;c(P,L)||s(P,L,a(6,O.c))}},2343:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(6252),o=r(3577);const i=e=>((0,n.dD)("data-v-abdc0e30"),e=e(),(0,n.Cn)(),e),a={id:"container"},s={key:0},c=i((()=>(0,n._)("br",null,null,-1))),l=["src"],d={key:0},u=["src","onClick"];function p(e,t,r,i,p,f){const h=(0,n.up)("ion-title"),m=(0,n.up)("ion-progress-bar"),w=(0,n.up)("ion-toolbar"),y=(0,n.up)("ion-header"),v=(0,n.up)("ion-avatar"),g=(0,n.up)("ion-label"),E=(0,n.up)("ion-chip"),b=(0,n.up)("ion-col"),_=(0,n.up)("ion-row"),R=(0,n.up)("ion-grid"),A=(0,n.up)("ion-icon"),T=(0,n.up)("ion-fab-button"),P=(0,n.up)("ion-fab"),I=(0,n.up)("ion-content"),C=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(C,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Envios")])),_:1}),e.loading?((0,n.wg)(),(0,n.j4)(m,{key:0,type:"indeterminate"})):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{collapse:"condense"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)("Envios")])),_:1})])),_:1})])),_:1}),(0,n._)("div",a,[1==e.step?((0,n.wg)(),(0,n.iD)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.types,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t},[c,(0,n.Wm)(E,{onClick:r=>e.selectType(t)},{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n._)("img",{alt:"Icono del tipo de envio",src:e.baseURL+"/"+t.icon_path},null,8,l)])),_:2},1024),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.name),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])):(0,n.kq)("",!0)]),2==e.step?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(R,null,{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.photos,(t=>((0,n.wg)(),(0,n.j4)(b,{size:"6",key:t},{default:(0,n.w5)((()=>[(0,n._)("img",{src:t.url,onClick:r=>e.showOption(t)},null,8,u)])),_:2},1024)))),128))])),_:1})])),_:1})])):(0,n.kq)("",!0),2==e.step?((0,n.wg)(),(0,n.j4)(P,{key:1,vertical:"bottom",horizontal:"start",slot:"fixed"},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{onClick:t[0]||(t[0]=t=>e.step=1)},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{icon:e.arrowBack},null,8,["icon"])])),_:1})])),_:1})):(0,n.kq)("",!0),2==e.step?((0,n.wg)(),(0,n.j4)(P,{key:2,vertical:"bottom",horizontal:"center",slot:"fixed"},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{onClick:t[1]||(t[1]=t=>e.takePicture())},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{icon:e.camera},null,8,["icon"])])),_:1})])),_:1})):(0,n.kq)("",!0),2==e.step?((0,n.wg)(),(0,n.j4)(P,{key:3,vertical:"bottom",horizontal:"end",slot:"fixed"},{default:(0,n.w5)((()=>[(0,n.Wm)(T,{onClick:e.sendShipment},{default:(0,n.w5)((()=>[(0,n.Wm)(A,{icon:e.send},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1})}r(7658),r(2801),r(3408),r(4590);var f=r(196),h=r(941),m=r(5241),w=r(9895),y=r(7439);const v=(0,w.fo)("Camera",{web:()=>r.e(806).then(r.bind(r,6806)).then((e=>new e.CameraWeb))});var g,E;(function(e){e["Documents"]="DOCUMENTS",e["Data"]="DATA",e["Library"]="LIBRARY",e["Cache"]="CACHE",e["External"]="EXTERNAL",e["ExternalStorage"]="EXTERNAL_STORAGE"})(g||(g={})),function(e){e["UTF8"]="utf8",e["ASCII"]="ascii",e["UTF16"]="utf16"}(E||(E={}));const b=(0,w.fo)("Filesystem",{web:()=>r.e(176).then(r.bind(r,3176)).then((e=>new e.FilesystemWeb))}),_=(0,w.fo)("Geolocation",{web:()=>r.e(642).then(r.bind(r,6642)).then((e=>new e.GeolocationWeb))});var R=r(8903),A=r(3907),T=r(5113),P=(0,n.aZ)({name:"Tab1Page",components:{IonAvatar:h.BJ,IonChip:h.hM,IonLabel:h.Q$,IonHeader:h.Gu,IonCol:h.wI,IonRow:h.Nd,IonToolbar:h.sr,IonProgressBar:h.X7,IonTitle:h.wd,IonContent:h.W2,IonPage:h._i,IonFab:h.IJ,IonFabButton:h.W4},data(){return{baseURL:f.Z.defaults.baseURL,types:[],loading:!0,type_shipment:null,step:1,photos:[],photo_files:[],position:null}},setup(){return{camera:R.nSy,trash:R._Ij,close:R.xvD,share:R.BNl,send:R.lWK,arrowBack:R.XRs}},async mounted(){0==this.types.length&&this.getTypes(),this.position=await this.printCurrentPosition(),console.log(this.position)},computed:{...(0,A.Se)(["getUser"])},methods:{async showOption(e){const t=await h.BO.create({header:"Fotos",buttons:[{text:"Borrar",role:"destructive",icon:R._Ij,handler:()=>{this.deletePhoto(e)}},{text:"Cancelar",icon:R.xvD,role:"cancel",handler:()=>{}}]});await t.present()},async sendShipment(){var e=await T.Z.showLoading();e.present();var t=new FormData;t.append("type_shipment_id",this.type_shipment.id),t.append("latitude",this.position?.coords?.latitude??""),t.append("longitude",this.position?.coords?.longitude??"");for(var r=0;r<this.photo_files.length;r++)t.append("photo-"+r,this.photo_files[r]);f.Z.post("/api/shipments",t).then((t=>{e.dismiss(),console.log(t),location.reload(),T.Z.openToast("Envio registrado exitosamente","success",1e4)})).catch((t=>{e.dismiss(),400==t.response.status&&T.Z.openToast("Creendenciales Invalidas","error",1e4),console.log(t)}))},getTypes(){f.Z.get("/api/type_shipments?all=true").then((e=>{this.types=e.data.data,this.loading=!1})).catch((e=>{this.loading=!1,console.log(e)}))},selectType(e){this.type_shipment=e,this.step=2},async selectPicture(){const e=await v.getPhoto({resultType:y.dk.Uri,source:y.oK.PHOTOS,quality:100});console.log(e);const t=(new Date).getTime()+".jpeg",r=await this.savePicture(e,t);this.photos=[r,...this.photos],console.log(this.photos)},async takePicture(){const e=await v.getPhoto({resultType:y.dk.DataUrl,source:y.oK.Camera,quality:20});this.loading=!0;const t=(new Date).getTime()+"."+e.format,r=this.dataURLtoFile(e.dataUrl,t);if(r.size>5e5){const r=Buffer.from(e.dataUrl.split(",")[1],"base64");var n=this;window.jimp.read(r).then((e=>{e.resize(550,window.jimp.AUTO,window.jimp.RESIZE_BEZIER).getBase64(window.jimp.MIME_PNG,(function(e,r){var o=n.dataURLtoFile(r,t);n.photo_files.push(o),n.photos.push({url:URL.createObjectURL(o),name:t}),console.log("new ->",o),n.loading=!1}))})).catch((e=>{n.loading=!1,console.log("error - "+e)}))}else this.loading=!1,this.photo_files.push(r),this.photos.push({url:URL.createObjectURL(r),name:t})},dataURLtoFile:function(e,t){var r=e.split(","),n=r[0].match(/:(.*?);/)[1],o=atob(r[1]),i=o.length,a=new Uint8Array(i);while(i--)a[i]=o.charCodeAt(i);return new File([a],t,{type:n})},async savePicture(e,t){let r;const n=await fetch(e.webPath),o=await n.blob();if((0,m.a)("hybrid")){const t=await b.readFile({path:e.path});r=t.data}else r=await this.convertBlobToBase64(o);const i=await b.writeFile({path:t,data:r,directory:g.Data});return(0,m.a)("hybrid")?{blob:o,filepath:i.uri,webviewPath:w.dV.convertFileSrc(i.uri)}:{blob:o,filepath:t,webviewPath:e.webPath}},async deletePhoto(e){this.photos=this.photos.filter((t=>t.url!==e.url)),this.photo_files=this.photo_files.filter((t=>t.name!==e.name))},async printCurrentPosition(){const e=await _.getCurrentPosition();return e},async convertBlobToBase64(e){return new Promise(((t,r)=>{const n=new FileReader;n.onerror=r,n.onload=()=>{t(n.result)},n.readAsDataURL(e)}))}}}),I=r(3744);const C=(0,I.Z)(P,[["render",p],["__scopeId","data-v-abdc0e30"]]);var O=C}}]);
//# sourceMappingURL=343.478bc591.js.map